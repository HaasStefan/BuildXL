trigger: none # Triggered only by the rolling pipeline

parameters:
- name: rmBranch
  type: string
- name: EnablePublishing
  type: boolean
  default: false

variables:
# The internal YAMLs use this value to skip publishing tasks
- name: EnablePublishing
  value: ${{ parameters.EnablePublishing }}

resources:
  repositories:
  - repository: DominoReleaseManagement
    type: git
    name: Domino.ReleaseManagement
    ref: ${{ parameters.rmBranch }}
  
  pipelines:
  - pipeline: BxlRollingPipeline
    source: '\BuildXL\BuildXL Rolling'
    trigger:
      branches:
        include:
          - main
  - pipeline: CloudBuild
    source: 'CloudBuild\ReleaseBuilds\CloudBuild Deploy QBits (YML)'

extends:
  template: /pipelines/release/pipeline.yml@DominoReleaseManagement
  parameters:
    # The name must match the name in the 'repositories' block.
    DominoRMResourceName: DominoReleaseManagement