BuildXL does not place limits on the size of spec files or the graph constructed from them.
BuildXL also has optimizations that allow it to parse, validate, and evaluate even large sets of spec files under a reasonable amount of time.
However, there are cases where the graph is so big and complex that its construction is starting to take long time.
To address this, we have a tool (`BxlPipGraphFragmentGenerator`) that allows to generate disjoined graph pieces that later can be consumed and combined into a complete graph.
This example demonstrates how one can create and consume graph fragments in a build.

There are three directories here:

### OriginalGraph 
Contains specs for a simple graph that consists of three pips. The main purpose of this directory is to provide sort of a reference point, an example of how specs might look like before they are split into fragments. Usually, graph fragments are created at some logical boundary (e.g., directory or module). For this example, we will be placing each pip from this reference build into a separate fragment. 

How to run the build:
  
1. cd Examples\BinaryGraphFragments\OriginalGraph
2. Set the environment variable `BUILDXL_BIN` to the directory where BuildXL binaries and `bxl.exe` can be found.
3. Execute `<Path to BUILDXL_BIN>\bxl.exe /c:config.dsc`

### GraphFragments
Contains a build that produces three graph fragments. 

`Fragments` directory contains three subdirectories, i.e., one subdirectory for each fragment that we will be generating. Each subdirectory contains all specs needed to generate a valid though potentially incomplete graph. 

How to run the build:
1.	cd Examples\BinaryGraphFragments\GraphFragments
2.	Set the environment variable `BUILDXL_BIN` to the directory where BuildXL binaries and `bxl.exe` can be found.
3.	Set the environment variable `OUTPUT_DIR` to the directory that should be used as an output for all fragments.
4.	Execute `<Path to BUILDXL_BIN>\bxl.exe /c:config.dsc`


### ComposedGraph
Contains a build that loads three graph fragments and executes pips defined in them.

How to run the build:
1. cd Examples\BinaryGraphFragments\ComposedGraph
2. Set the environment variable `BUILDXL_BIN` to the directory where BuildXL binaries and `bxl.exe` can be found.
3. Set the environment variable `OUTPUT_DIR` to the directory that should be used as an output for all fragments. Use the same location that was used during graph fragment generation.
4. Set the environment variable `GRAPH_FRAGMENTS_LOCATION` to the directory that contains graph fragments that were generated by the previous build.
5. Execute `<Path to BUILDXL_BIN>\bxl.exe /c:config.dsc`

#### Chaining Builds Together

In the most common case, the construction of graph fragments and their consumption usually happens as a single action during which two consecutive builds are launched. As an example, we provide `createFragmentsAndBuildThem.cmd` that simulates such a scenario. Follow these steps to execute it:
1. cd Examples\BinaryGraphFragments
2. Set the environment variable `BUILDXL_BIN` to the directory where BuildXL binaries and `bxl.exe` can be found.
3. Run `createFragmentsAndBuildThem.cmd`. This will launch two BuildXL builds - one that will create the fragmetns and the the other that will combine and run them (essentially, the two builds described above).